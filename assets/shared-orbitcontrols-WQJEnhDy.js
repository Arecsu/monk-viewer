import{a as W,l as _,Y as q,A as I,Z as U,S as X,_ as Y,$ as J,a0 as Z,H as b,a1 as $,a2 as K,r as Q,L as V,a3 as ee}from"./vendor-three-vipzP7jj.js";import{H as te}from"./gainmap-js-BH3obvD4.js";import{B as ne,T as ae,a as ie,H as se,b as F,c as oe,F as ce,E as re,R as le,d as E}from"./postprocessing-CKAQ8ovc.js";var pe="/monk-viewer/assets/McLovin-1024x-DrI75Pld.glb",de="/monk-viewer/assets/old_bus_depot_2k_HDR-CghB0eNo.jpg";function ge(M){const{canvas:x,inputElement:a,pixelRatio:L}=M,s=new W({powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1,canvas:x});s.setPixelRatio(L||1),s.outputColorSpace=_,s.toneMapping=q,s.toneMappingExposure=1.5;const P=50,R=2,y=.1,k=100,o=new I(P,R,y,k);o.position.z=.8;const l=new U(o,a);l.enableDamping=!0,l.dampingFactor=.055,l.target.set(0,0,0),l.update();const p=new X,H=16777215,j=1;new Y(H,j).position.set(-10,5,40);let f,h=Date.now(),g;new J().load(pe,async function(t){const n=t.scene;n.scale.set(1,1,1),n.traverse(i=>{if(i.isMesh){const c=m=>{m&&(m.minFilter=Q,m.magFilter=V,m.anisotropy=s.capabilities.getMaxAnisotropy(),m.generateMipmaps=!0)};c(i.material.map),c(i.material.normalMap),c(i.material.roughnessMap),c(i.material.metalnessMap)}}),await s.compileAsync(n,o,p),f=new Z(n),f.clipAction(t.animations[0]).play(),p.add(n),requestAnimationFrame(v)}),new te(s).load(de,function(t){const n=t.renderTarget.texture;n.type=b,n.needsUpdate=!0,p.environment=n,p.environment.mapping=$,t.dispose()}),new ne({luminanceThreshold:.5,luminanceSmoothing:.1,mipmapBlur:1,intensity:.8,radius:.7});const O=new ae({mode:ie.REINHARD,resolution:256,whitePoint:10,middleGrey:.8,minLuminance:.01,averageLuminance:.1,adaptationRate:1});new se({hue:0,saturation:0,blendFunction:F.NORMAL});const C=new oe({brightness:0,contrast:.1,blendFunction:F.NORMAL}),A=new ce,d=new re(s,{frameBufferType:b});d.addPass(new le(p,o));const D=new E(o,A);d.addPass(D),d.addPass(new E(o,O,C));const S=1,T=1,B=1;new K(S,T,B);class z{constructor(){this.raycaster=new ee,this.pickedObject=null,this.pickedObjectSavedColor=0}pick(t,n,r,i){this.pickedObject&&(this.pickedObject.material.emissive.setHex(this.pickedObjectSavedColor),this.pickedObject=void 0),this.raycaster.setFromCamera(t,r);const c=this.raycaster.intersectObjects(n.children);c.length&&(this.pickedObject=c[0].object,this.pickedObjectSavedColor=this.pickedObject.material.emissive.getHex(),this.pickedObject.material.emissive.setHex(i*8%2>1?16776960:16711680))}}new z;function G(e){const t=e.domElement,n=a.clientWidth,r=a.clientHeight,i=t.width!==n||t.height!==r;return i&&(e.setSize(n,r,!1),d.setSize(n,r)),i}function v(e){G(s)&&(o.aspect=a.clientWidth/a.clientHeight,o.updateProjectionMatrix()),g=(Date.now()-h)/1e3,f&&f.update(g),l.update(),d.render(),h=Date.now(),requestAnimationFrame(v)}function N(e){const t=a.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function u(e){const t=N(e);t.x/a.clientWidth*2-1,t.y/a.clientHeight*-2+1}function w(){}a.addEventListener("mousemove",u),a.addEventListener("mouseout",w),a.addEventListener("mouseleave",w),a.addEventListener("touchstart",e=>{e.preventDefault(),u(e.touches[0])},{passive:!1}),a.addEventListener("touchmove",e=>{u(e.touches[0])}),a.addEventListener("touchend",e=>{})}export{ge as i};
