import{i as f}from"./shared-orbitcontrols-h_ibG_Vh.js";import"./vendor-three-CF0qx6hp.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const c=l(["ctrlKey","metaKey","shiftKey","button","pointerType","clientX","clientY","pointerId","pageX","pageY"]),p=l(["deltaX","deltaY"]),y=l(["ctrlKey","metaKey","shiftKey","keyCode"]);function m(e,n){e.preventDefault(),p(e,n)}function h(e){e.preventDefault()}function g(e,n,r){for(const s of n)r[s]=e[s]}function l(e){return function(r,s){const t={type:r.type};g(r,e,t),s(t)}}function a(e,n){e.preventDefault();const r=[],s={type:e.type,touches:r};for(let t=0;t<e.touches.length;++t){const o=e.touches[t];r.push({pageX:o.pageX,pageY:o.pageY,clientX:o.clientX,clientY:o.clientY})}n(s)}const v={37:!0,38:!0,39:!0,40:!0};function w(e,n){const{keyCode:r}=e;v[r]&&(e.preventDefault(),y(e,n))}let E=0;class P{constructor(n,r,s){this.id=E++,this.worker=r;const t=i=>{this.worker.postMessage({type:"event",id:this.id,data:i})};r.postMessage({type:"makeProxy",id:this.id}),o();for(const[i,u]of Object.entries(s))n.addEventListener(i,function(d){u(d,t)});function o(){const i=n.getBoundingClientRect();t({type:"size",left:i.left,top:i.top,width:n.clientWidth,height:n.clientHeight})}window.addEventListener("resize",o)}}function H(e){const n=e.transferControlToOffscreen(),r=new Worker(new URL("/monk-viewer/assets/offscreencanvas-worker-orbitcontrol-B4T5rJzl.js",import.meta.url),{type:"module"}),s={contextmenu:h,mousedown:c,mousemove:c,mouseup:c,pointerdown:c,pointermove:c,pointerup:c,touchstart:a,touchmove:a,touchend:a,wheel:m,keydown:w},t=new P(e,r,s);r.postMessage({type:"start",canvas:n,canvasId:t.id},[n]),console.log("using OffscreenCanvas")}function O(e){f({canvas:e,inputElement:e}),console.log("using regular canvas")}function K(){const e=document.querySelector("#c");e.transferControlToOffscreen?H(e):O(e)}K();
